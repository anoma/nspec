---
icon: octicons/gear-16
search:
  exclude: false
categories:
- engine
tags:
- commitment-engine
- engine-definition
---

??? quote "Juvix imports"

    ```juvix
    module arch.node.engines.commitment;

    import prelude open;
    import arch.node.types.engine open;

    import arch.node.engines.commitment_config open public;
    import arch.node.engines.commitment_messages open public;
    import arch.node.engines.commitment_environment open public;
    import arch.node.engines.commitment_behaviour open public;

    import arch.node.types.anoma as Anoma open;

    open commitment_config_example;
    open commitment_environment_example;
    ```

# Commitment Engine

The Commitment engine is responsible for generating commitments (signatures) by
a particular identity. Commitment engine instances are generated by the
[[Identity Management Engine]] when an identity is generated or connected.

## Purpose

The Commitment Engine maintains signing capabilities for a specific identity and
handles commitment (signature) requests for that identity. Only the original
caller and anyone to whom they pass the engine instance reference can send
messages to the instance and generate commitments by the corresponding identity.

## Components

- [[Commitment Messages]]
- [[Commitment Configuration]]
- [[Commitment Environment]]
- [[Commitment Behaviour]]

## Type

<!-- --8<-- [start:CommitmentEngine] -->
```juvix
CommitmentEngine : Type :=
  Engine
    CommitmentCfg
    CommitmentLocalState
    CommitmentMailboxState
    CommitmentTimerHandle
    CommitmentActionArguments
    Anoma.Msg
    Anoma.Cfg
    Anoma.Env;
```
<!-- --8<-- [end:CommitmentEngine] -->

### Example of a commitment engine

<!-- --8<-- [start:exampleCommitmentEngine] -->
```juvix
exampleCommitmentEngine : CommitmentEngine :=
  mkEngine@{
    cfg := commitmentCfg;
    env := commitmentEnv;
    behaviour := commitmentBehaviour;
  };
```
<!-- --8<-- [end:exampleCommitmentEngine] -->

where `commitmentCfg` is defined as follows:

--8<-- "./docs/arch/node/engines/commitment_config.juvix.md:commitmentCfg"

`commitmentEnv` is defined as follows:

--8<-- "./docs/arch/node/engines/commitment_environment.juvix.md:commitmentEnv"

and `commitmentBehaviour` is defined as follows:

--8<-- "./docs/arch/node/engines/commitment_behaviour.juvix.md:commitmentBehaviour"
