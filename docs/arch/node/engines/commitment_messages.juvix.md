---
icon: octicons/gear-16
search:
  exclude: false
categories:
- engine-behaviour
tags:
- commitment
- engine-messages
---

??? quote "Juvix imports"

    ```juvix
    module arch.node.engines.commitment_messages;
    import prelude open;
    import arch.node.types.identities open;
    ```

# Commitment Messages

## Message interface

--8<-- "./commitment_messages.juvix.md:CommitmentMsg"


## Message sequence diagrams

---

### Request sequence

<!-- --8<-- [start:message-sequence-diagram] -->
<figure markdown="span">

```mermaid
sequenceDiagram
    participant C as Client
    participant CE as Commitment Engine

    C->>CE: RequestCommitment(data)
    Note over CE: Generate commitment using internal signer
    CE-->>C: ReplyCommitment(commitment)
```

<figcaption markdown="span">
Sequence diagram for commitment generation.
</figcaption>
</figure>
<!-- --8<-- [end:message-sequence-diagram] -->

## Message types

---

### `RequestCommitment`

```juvix
type RequestCommitment := mkRequestCommitment {
  data : Signable
};
```

A `RequestCommitment` instructs a commitment engine instance to produce a
commitment (signature) over the provided data.

???+ quote "Arguments"

    `data`:
    : The data to sign.

### `ReplyCommitment`

```juvix
type ReplyCommitment := mkReplyCommitment {
  commitment : Commitment;
  err : Option String;
};
```

A `ReplyCommitment` contains the commitment (signature) generated by the
commitment engine instance in response to a `RequestCommitment`.

???+ quote "Arguments"

    `commitment`:
    : The generated commitment (signature).

    `err`:
    : An error message if commitment generation failed.

### `CommitmentMsg`

<!-- --8<-- [start:CommitmentMsg] -->
```juvix
type CommitmentMsg :=
  | MsgCommitmentRequest RequestCommitment
  | MsgCommitmentReply ReplyCommitment
  ;
```
<!-- --8<-- [end:CommitmentMsg] -->

## Engine components

- [[Commitment Configuration]]
- [[Commitment Environment]]
- [[Commitment Behaviour]]
