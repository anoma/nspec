---
icon: octicons/gear-16
search:
  exclude: false
categories:
- engine-behaviour
tags:
- commitment
- engine-messages
---

??? quote "Juvix imports"

    ```juvix
    module arch.node.engines.commitment_messages;
    import prelude open;
    import arch.node.types.identities open;
    ```

# `Commitment` Messages

## Message interface

<!-- --8<-- [start:CommitmentMsg] -->
```juvix
type CommitmentMsg :=
  | -- --8<-- [start:CommitRequest]
    CommitRequest {
      data : Signable
    }
    -- --8<-- [end:CommitRequest]
  | -- --8<-- [start:CommitResponse]
    CommitResponse {
      commitment : Commitment;
      err : Option String;
    }
    -- --8<-- [end:CommitResponse]
  ;
```
<!-- --8<-- [end:CommitmentMsg] -->

### `CommitRequest` message

!!! quote "CommitRequest"

    ```
    --8<-- "./commitment_messages.juvix.md:CommitRequest"
    ```

A `CommitRequest` instructs a commitment engine instance to produce a commitment
(signature) over the provided data.

- `data`: The data to sign.

### `CommitResponse` message

!!! quote "CommitResponse"

    ```
    --8<-- "./commitment_messages.juvix.md:CommitResponse"
    ```

A `CommitResponse` contains the commitment (signature) generated by the
commitment engine instance in response to a `CommitRequest`.

- `commitment`: The generated commitment (signature).
- `err`: An error message if commitment generation failed.

## Message sequence diagrams

### Commitment Generation Sequence

<!-- --8<-- [start:message-sequence-diagram] -->
<figure markdown="span">

```mermaid
sequenceDiagram
    participant C as Client
    participant CE as Commitment Engine

    C->>CE: CommitRequest(data)
    Note over CE: Generate commitment using internal signer
    CE-->>C: CommitResponse(commitment)
```

<figcaption markdown="span">
Sequence diagram for commitment generation.
</figcaption>
</figure>
<!-- --8<-- [end:message-sequence-diagram] -->

## Engine Components

- [[Commitment Environment|`Commitment` Engine Environment]]
- [[Commitment Dynamics|`Commitment` Engine Dynamics]]

## Useful links
